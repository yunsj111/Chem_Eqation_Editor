import streamlit as st
import sys
import os
from pathlib import Path

# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ Python íŒ¨ìŠ¤ì— ì¶”ê°€
project_root = Path(__file__).parent
sys.path.append(str(project_root))

# ì»´í¬ë„ŒíŠ¸ ì„í¬íŠ¸
from components.molecule_drawer import MoleculeDrawer
from components.smarts_generator import SmartsGenerator
from components.pattern_matcher import PatternMatcher
from components.utils import get_common_smarts_patterns, get_element_info

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="SMARTS íŒ¨í„´ í¸ì§‘ê¸°",
    page_icon="ğŸ§ª",
    layout="wide",
    initial_sidebar_state="expanded"
)

# ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
def create_sidebar():
    """ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ìƒì„±"""
    with st.sidebar:
        st.title("ğŸ§ª SMARTS í¸ì§‘ê¸°")
        st.markdown("---")

        # ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜
        page = st.selectbox(
            "í˜ì´ì§€ ì„ íƒ:",
            [
                "ğŸ  í™ˆ",
                "âœï¸ ë¶„ì ê·¸ë¦¬ê¸°",
                "ğŸ§¬ SMARTS ìƒì„±",
                "ğŸ” íŒ¨í„´ ë§¤ì¹­",
                "ğŸ”„ ë°°ì¹˜ ë§¤ì¹­",
                "ğŸ“š íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬",
                "â„¹ï¸ ë„ì›€ë§"
            ]
        )

        st.markdown("---")

        # ë¹ ë¥¸ ì•¡ì„¸ìŠ¤
        st.subheader("ë¹ ë¥¸ ì•¡ì„¸ìŠ¤")

        # ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´
        st.write("**ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´:**")
        common_patterns = get_common_smarts_patterns()

        for name, pattern in list(common_patterns.items())[:5]:
            if st.button(f"{pattern}", key=f"quick_{name}", help=name):
                st.session_state['selected_pattern'] = pattern
                st.success(f"'{pattern}' ì„ íƒë¨")

        # ì„¸ì…˜ ì •ë³´
        st.markdown("---")
        st.subheader("ì„¸ì…˜ ì •ë³´")

        if 'molecule_data' in st.session_state:
            atom_count = len(st.session_state.molecule_data.get('atoms', []))
            bond_count = len(st.session_state.molecule_data.get('bonds', []))
            st.write(f"**ì›ì ìˆ˜:** {atom_count}")
            st.write(f"**ê²°í•© ìˆ˜:** {bond_count}")

        if 'selected_pattern' in st.session_state:
            st.write(f"**ì„ íƒëœ íŒ¨í„´:** `{st.session_state.selected_pattern}`")

        # ì„¸ì…˜ ì´ˆê¸°í™”
        if st.button("ğŸ”„ ì„¸ì…˜ ì´ˆê¸°í™”"):
            for key in list(st.session_state.keys()):
                del st.session_state[key]
            st.success("ì„¸ì…˜ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!")
            st.rerun()

    return page

def create_home_page():
    """í™ˆ í˜ì´ì§€"""
    st.title("ğŸ§ª SMARTS íŒ¨í„´ í¸ì§‘ê¸°")
    st.markdown("---")

    # ì†Œê°œ
    st.markdown("""
    ## í™˜ì˜í•©ë‹ˆë‹¤! ğŸ‘‹

    ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ **SMARTS (SMiles ARbitrary Target Specification)** íŒ¨í„´ì„ 
    ì‹œê°ì ìœ¼ë¡œ í¸ì§‘í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í†µí•© ë„êµ¬ì…ë‹ˆë‹¤.
    """)

    # ì£¼ìš” ê¸°ëŠ¥
    col1, col2 = st.columns(2)

    with col1:
        st.subheader("ğŸ¨ ì£¼ìš” ê¸°ëŠ¥")
        st.markdown("""
        - **ë¶„ì ê·¸ë¦¬ê¸°**: ì§ê´€ì ì¸ GUIë¡œ ë¶„ì êµ¬ì¡° í¸ì§‘
        - **SMARTS ìƒì„±**: ê·¸ë¦° ë¶„ìì—ì„œ ìë™ìœ¼ë¡œ SMARTS íŒ¨í„´ ìƒì„±
        - **íŒ¨í„´ ë§¤ì¹­**: SMARTS íŒ¨í„´ìœ¼ë¡œ ë¶„ì ê²€ìƒ‰
        - **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ íŒ¨í„´ì„ í•œ ë²ˆì— í…ŒìŠ¤íŠ¸
        - **íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬**: ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ ê´€ë¦¬
        """)

    with col2:
        st.subheader("ğŸš€ ì‹œì‘í•˜ê¸°")
        st.markdown("""
        1. **ë¶„ì ê·¸ë¦¬ê¸°** í˜ì´ì§€ì—ì„œ ë¶„ìë¥¼ ê·¸ë ¤ë³´ì„¸ìš”
        2. **SMARTS ìƒì„±** í˜ì´ì§€ì—ì„œ íŒ¨í„´ì„ í™•ì¸í•˜ì„¸ìš”
        3. **íŒ¨í„´ ë§¤ì¹­** í˜ì´ì§€ì—ì„œ ë‹¤ë¥¸ ë¶„ìë“¤ê³¼ ë¹„êµí•˜ì„¸ìš”
        4. **íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì—ì„œ ìœ ìš©í•œ íŒ¨í„´ë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”
        """)

    # ì˜ˆì‹œ ì„¹ì…˜
    st.markdown("---")
    st.subheader("ğŸ“‹ ì‚¬ìš© ì˜ˆì‹œ")

    tab1, tab2, tab3 = st.tabs(["ê¸°ë³¸ íŒ¨í„´", "ì‘ìš©ê¸° ê²€ìƒ‰", "ì•½ë¬¼ ë¶„ì„"])

    with tab1:
        st.markdown("""
        ### ê¸°ë³¸ SMARTS íŒ¨í„´ ì˜ˆì‹œ

        | íŒ¨í„´ | ì„¤ëª… | ì˜ˆì‹œ |
        |------|------|------|
        | `c1ccccc1` | ë²¤ì   ê³ ë¦¬ | ë²¤ì  , í†¨ë£¨ì—”, í˜ë†€ |
        | `C=O` | ì¹´ë¥´ë³´ë‹ | ì•Œë°íˆë“œ, ì¼€í†¤ |
        | `[OH]` | í•˜ì´ë“œë¡ì‹¤ | ì•Œì½”ì˜¬, í˜ë†€ |
        | `N` | ì§ˆì†Œ ì›ì | ì•„ë¯¼, ì•„ë¯¸ë“œ |
        | `*` | ì„ì˜ ì›ì | ëª¨ë“  ì›ì |
        """)

    with tab2:
        st.markdown("""
        ### ì‘ìš©ê¸° ê²€ìƒ‰ ì˜ˆì‹œ

        **ì¹´ë¥´ë³µì‹¤ì‚° ê²€ìƒ‰:**
        ```
        íŒ¨í„´: C(=O)O
        ë§¤ì¹­: ì•„ì„¸íŠ¸ì‚°, ë²¤ì¡°ì‚°, ì•„ë¯¸ë…¸ì‚° ë“±
        ```

        **ì—ìŠ¤í…Œë¥´ ê²€ìƒ‰:**
        ```
        íŒ¨í„´: C(=O)O[!H]
        ë§¤ì¹­: ì•„ìŠ¤í”¼ë¦°, ì§€ë°©ì‚° ì—ìŠ¤í…Œë¥´ ë“±
        ```

        **ì•„ë¯¸ë“œ ê²€ìƒ‰:**
        ```
        íŒ¨í„´: C(=O)N
        ë§¤ì¹­: ë‹¨ë°±ì§ˆ, ë‚˜ì¼ë¡  ë“±
        ```
        """)

    with tab3:
        st.markdown("""
        ### ì•½ë¬¼ ë¶„ì„ ì˜ˆì‹œ

        **NSAIDs (ë¹„ìŠ¤í…Œë¡œì´ë“œì„± ì†Œì—¼ì œ) íŒ¨í„´:**
        ```
        íŒ¨í„´: c1ccccc1C(=O)O
        ë§¤ì¹­: ì•„ìŠ¤í”¼ë¦°, ì´ë¶€í”„ë¡œíœ ë“±
        ```

        **ë² íƒ€ ì°¨ë‹¨ì œ íŒ¨í„´:**
        ```
        íŒ¨í„´: c1ccccc1OCCNC
        ë§¤ì¹­: í”„ë¡œí”„ë¼ë†€ë¡¤, ë©”í† í”„ë¡¤ë¡¤ ë“±
        ```
        """)

    # í†µê³„ ì •ë³´
    st.markdown("---")
    col1, col2, col3, col4 = st.columns(4)

    with col1:
        st.metric("ì§€ì› ì›ì†Œ", "20+")

    with col2:
        st.metric("ê¸°ë³¸ íŒ¨í„´", "50+")

    with col3:
        st.metric("í…ŒìŠ¤íŠ¸ ë¶„ì", "20+")

    with col4:
        st.metric("ê²°í•© íƒ€ì…", "5")

    # ìµœê·¼ ì—…ë°ì´íŠ¸
    st.markdown("---")
    st.subheader("ğŸ“ ìµœê·¼ ì—…ë°ì´íŠ¸")

    with st.expander("ë²„ì „ 1.0.0 - 2024ë…„"):
        st.markdown("""
        - âœ… ë¶„ì ê·¸ë¦¬ê¸° ê¸°ëŠ¥ ì¶”ê°€
        - âœ… SMARTS íŒ¨í„´ ìë™ ìƒì„±
        - âœ… íŒ¨í„´ ë§¤ì¹­ ê¸°ëŠ¥
        - âœ… ë°°ì¹˜ ì²˜ë¦¬ ê¸°ëŠ¥
        - âœ… íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬
        - âœ… íŒŒì¼ ì…ì¶œë ¥ ì§€ì›
        """)

def create_help_page():
    """ë„ì›€ë§ í˜ì´ì§€"""
    st.title("â„¹ï¸ ë„ì›€ë§")
    st.markdown("---")

    # ëª©ì°¨
    st.subheader("ğŸ“‹ ëª©ì°¨")
    st.markdown("""
    1. [SMARTS ë¬¸ë²• ê¸°ì´ˆ](#smarts-ë¬¸ë²•-ê¸°ì´ˆ)
    2. [ë¶„ì ê·¸ë¦¬ê¸° ê°€ì´ë“œ](#ë¶„ì-ê·¸ë¦¬ê¸°-ê°€ì´ë“œ)
    3. [íŒ¨í„´ ë§¤ì¹­ ê°€ì´ë“œ](#íŒ¨í„´-ë§¤ì¹­-ê°€ì´ë“œ)
    4. [ìì£¼ ë¬»ëŠ” ì§ˆë¬¸](#ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸)
    5. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)
    """)

    # SMARTS ë¬¸ë²•
    st.markdown("---")
    st.subheader("ğŸ“š SMARTS ë¬¸ë²• ê¸°ì´ˆ")

    tab1, tab2, tab3, tab4 = st.tabs(["ì›ì", "ê²°í•©", "ë…¼ë¦¬ ì—°ì‚°", "ê³ ê¸‰"])

    with tab1:
        st.markdown("""
        ### ì›ì í‘œí˜„

        | í‘œí˜„ | ì˜ë¯¸ | ì˜ˆì‹œ |
        |------|------|------|
        | `C` | ì§€ë°©ì¡± íƒ„ì†Œ | ë©”íƒ„, ì—íƒ„ |
        | `c` | ë°©í–¥ì¡± íƒ„ì†Œ | ë²¤ì  , í†¨ë£¨ì—” |
        | `N` | ì§ˆì†Œ | ì•„ë¯¼, ì•„ë¯¸ë“œ |
        | `O` | ì‚°ì†Œ | ì•Œì½”ì˜¬, ì—í…Œë¥´ |
        | `*` | ì„ì˜ ì›ì | ëª¨ë“  ì›ì |
        | `[C]` | ëª…ì‹œì  íƒ„ì†Œ | íŠ¹ì • ì¡°ê±´ì˜ íƒ„ì†Œ |
        | `[!C]` | íƒ„ì†Œê°€ ì•„ë‹Œ ì›ì | í—¤í…Œë¡œ ì›ì |
        | `[C,N]` | íƒ„ì†Œ ë˜ëŠ” ì§ˆì†Œ | OR ì¡°ê±´ |
        """)

    with tab2:
        st.markdown("""
        ### ê²°í•© í‘œí˜„

        | í‘œí˜„ | ì˜ë¯¸ | ì˜ˆì‹œ |
        |------|------|------|
        | `-` | ë‹¨ì¼ ê²°í•© | C-C |
        | `=` | ì´ì¤‘ ê²°í•© | C=O |
        | `#` | ì‚¼ì¤‘ ê²°í•© | C#N |
        | `:` | ë°©í–¥ì¡± ê²°í•© | ë²¤ì   ê³ ë¦¬ |
        | `~` | ì„ì˜ ê²°í•© | ëª¨ë“  ê²°í•© |
        | `@` | ê³ ë¦¬ ë‚´ ê²°í•© | ê³ ë¦¬ êµ¬ì¡° |
        | `!@` | ê³ ë¦¬ ì™¸ ê²°í•© | ì„ í˜• êµ¬ì¡° |
        """)

    with tab3:
        st.markdown("""
        ### ë…¼ë¦¬ ì—°ì‚°

        | ì—°ì‚° | ì˜ë¯¸ | ì˜ˆì‹œ |
        |------|------|------|
        | `,` | OR | `[C,N]` (íƒ„ì†Œ ë˜ëŠ” ì§ˆì†Œ) |
        | `&` | AND | `[C&R]` (ê³ ë¦¬ ë‚´ íƒ„ì†Œ) |
        | `!` | NOT | `[!C]` (íƒ„ì†Œê°€ ì•„ë‹˜) |
        | `;` | ë‚®ì€ ìš°ì„ ìˆœìœ„ AND | ë³µì¡í•œ ì¡°ê±´ |
        """)

    with tab4:
        st.markdown("""
        ### ê³ ê¸‰ í‘œí˜„

        | í‘œí˜„ | ì˜ë¯¸ | ì˜ˆì‹œ |
        |------|------|------|
        | `[H]` | ìˆ˜ì†Œ ê°œìˆ˜ | `[CH3]` (ë©”í‹¸) |
        | `[+]` | ì–‘ì „í•˜ | `[N+]` (ì–‘ì´ì˜¨) |
        | `[-]` | ìŒì „í•˜ | `[O-]` (ìŒì´ì˜¨) |
        | `[R]` | ê³ ë¦¬ ë‚´ ì›ì | ê³ ë¦¬ êµ¬ì¡° |
        | `[R0]` | ê³ ë¦¬ ì™¸ ì›ì | ì„ í˜• êµ¬ì¡° |
        | `[D2]` | ê²°í•© ì°¨ìˆ˜ 2 | 2ê°œ ê²°í•© |
        | `[v4]` | ì›ìê°€ 4 | 4ê°€ ì›ì |
        """)

    # ë¶„ì ê·¸ë¦¬ê¸° ê°€ì´ë“œ
    st.markdown("---")
    st.subheader("ğŸ¨ ë¶„ì ê·¸ë¦¬ê¸° ê°€ì´ë“œ")

    col1, col2 = st.columns(2)

    with col1:
        st.markdown("""
        ### ê¸°ë³¸ ì¡°ì‘

        1. **ì›ì ì¶”ê°€**
           - ì›ì ëª¨ë“œ ì„ íƒ
           - ì›ì†Œ ì„ íƒ (C, N, O ë“±)
           - ìº”ë²„ìŠ¤ í´ë¦­

        2. **ê²°í•© ìƒì„±**
           - ê²°í•© ëª¨ë“œ ì„ íƒ
           - ê²°í•© íƒ€ì… ì„ íƒ
           - ì²« ë²ˆì§¸ ì›ì í´ë¦­
           - ë‘ ë²ˆì§¸ ì›ì í´ë¦­

        3. **ì›ì ì´ë™**
           - ì„ íƒ ëª¨ë“œ í™œì„±í™”
           - ì›ìë¥¼ ë“œë˜ê·¸
        """)

    with col2:
        st.markdown("""
        ### ê³ ê¸‰ ê¸°ëŠ¥

        1. **SMARTS ì˜µì…˜**
           - ë°©í–¥ì¡±/ì§€ë°©ì¡± ì„¤ì •
           - ì „í•˜ ì„¤ì •
           - ìˆ˜ì†Œ ê°œìˆ˜ ì„¤ì •
           - ë¶€ì • ì¡°ê±´ ì„¤ì •

        2. **ë¯¸ë¦¬ ì •ì˜ëœ êµ¬ì¡°**
           - ë²¤ì  , ì‚¬ì´í´ë¡œí—¥ì‚° ë“±
           - ì›í´ë¦­ìœ¼ë¡œ ì¶”ê°€

        3. **íŒŒì¼ ê´€ë¦¬**
           - JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥
           - êµ¬ì¡° ë¶ˆëŸ¬ì˜¤ê¸°
        """)

    # íŒ¨í„´ ë§¤ì¹­ ê°€ì´ë“œ
    st.markdown("---")
    st.subheader("ğŸ” íŒ¨í„´ ë§¤ì¹­ ê°€ì´ë“œ")

    st.markdown("""
    ### ë§¤ì¹­ ê³¼ì •

    1. **íŒ¨í„´ ì¤€ë¹„**
       - SMARTS íŒ¨í„´ ì…ë ¥ ë˜ëŠ” ìƒì„±
       - íŒ¨í„´ ìœ íš¨ì„± í™•ì¸

    2. **ë¶„ì ì¤€ë¹„**
       - ê¸°ë³¸ ë¶„ìì—ì„œ ì„ íƒ
       - SMILES ì§ì ‘ ì…ë ¥
       - íŒŒì¼ì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°

    3. **ë§¤ì¹­ ì‹¤í–‰**
       - ì˜µì…˜ ì„¤ì • (ì…ì²´í™”í•™, ë°©í–¥ì¡±ì„± ë“±)
       - ë§¤ì¹­ ì‹¤í–‰
       - ê²°ê³¼ í™•ì¸

    4. **ê²°ê³¼ ë¶„ì„**
       - ë§¤ì¹­ëœ ë¶„ì í™•ì¸
       - í•˜ì´ë¼ì´íŠ¸ í‘œì‹œ
       - í†µê³„ ì •ë³´ í™•ì¸
    """)

    # FAQ
    st.markdown("---")
    st.subheader("â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸")

    with st.expander("Q: SMARTSì™€ SMILESì˜ ì°¨ì´ì ì€?"):
        st.markdown("""
        **SMILES**ëŠ” íŠ¹ì • ë¶„ìë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì´ê³ ,
        **SMARTS**ëŠ” ë¶„ì íŒ¨í„´ì„ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì…ë‹ˆë‹¤.

        - SMILES: `CCO` (ì—íƒ„ì˜¬)
        - SMARTS: `C-C-O` (ì•Œì½”ì˜¬ íŒ¨í„´)
        """)

    with st.expander("Q: ë°©í–¥ì¡± ì›ìëŠ” ì–´ë–»ê²Œ í‘œí˜„í•˜ë‚˜ìš”?"):
        st.markdown("""
        ì†Œë¬¸ìë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:
        - `c`: ë°©í–¥ì¡± íƒ„ì†Œ
        - `n`: ë°©í–¥ì¡± ì§ˆì†Œ
        - `o`: ë°©í–¥ì¡± ì‚°ì†Œ

        ì˜ˆì‹œ: `c1ccccc1` (ë²¤ì  )
        """)

    with st.expander("Q: ê³ ë¦¬ êµ¬ì¡°ëŠ” ì–´ë–»ê²Œ ê·¸ë¦¬ë‚˜ìš”?"):
        st.markdown("""
        1. ê³ ë¦¬ì˜ ì›ìë“¤ì„ ìˆœì„œëŒ€ë¡œ ê·¸ë¦½ë‹ˆë‹¤
        2. ë§ˆì§€ë§‰ ì›ìì™€ ì²« ë²ˆì§¸ ì›ìë¥¼ ì—°ê²°í•©ë‹ˆë‹¤
        3. ìë™ìœ¼ë¡œ ê³ ë¦¬ ë²ˆí˜¸ê°€ í• ë‹¹ë©ë‹ˆë‹¤

        ë˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
        """)

    with st.expander("Q: íŒ¨í„´ì´ ë§¤ì¹­ë˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ”?"):
        st.markdown("""
        ê°€ëŠ¥í•œ ì›ì¸:
        1. íŒ¨í„´ ë¬¸ë²• ì˜¤ë¥˜
        2. ë°©í–¥ì¡±ì„± ë¶ˆì¼ì¹˜
        3. ì…ì²´í™”í•™ ì°¨ì´
        4. ì „í•˜ ìƒíƒœ ì°¨ì´

        í•´ê²° ë°©ë²•:
        1. íŒ¨í„´ ìœ íš¨ì„± í™•ì¸
        2. ë§¤ì¹­ ì˜µì…˜ ì¡°ì •
        3. ë” ì¼ë°˜ì ì¸ íŒ¨í„´ ì‚¬ìš©
        """)

    # ë¬¸ì œ í•´ê²°
    st.markdown("---")
    st.subheader("ğŸ”§ ë¬¸ì œ í•´ê²°")

    st.markdown("""
    ### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

    **1. ë¶„ìê°€ ê·¸ë ¤ì§€ì§€ ì•Šì„ ë•Œ**
    - ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨
    - ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì‹œë„
    - ìºì‹œ ì‚­ì œ

    **2. SMARTS ìƒì„±ì´ ì•ˆ ë  ë•Œ**
    - ì›ìê°€ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
    - ìœ íš¨í•œ ë¶„ì êµ¬ì¡°ì¸ì§€ í™•ì¸
    - ì„¸ì…˜ ì´ˆê¸°í™” í›„ ì¬ì‹œë„

    **3. ë§¤ì¹­ ê²°ê³¼ê°€ ì˜ˆìƒê³¼ ë‹¤ë¥¼ ë•Œ**
    - íŒ¨í„´ ë¬¸ë²• ì¬í™•ì¸
    - ë§¤ì¹­ ì˜µì…˜ ì¡°ì •
    - ë” êµ¬ì²´ì ì´ê±°ë‚˜ ì¼ë°˜ì ì¸ íŒ¨í„´ ì‹œë„

    **4. ì„±ëŠ¥ì´ ëŠë¦´ ë•Œ**
    - ë¶„ì ìˆ˜ ì¤„ì´ê¸°
    - íŒ¨í„´ ë‹¨ìˆœí™”
    - ë°°ì¹˜ í¬ê¸° ì¡°ì •
    """)

    # ì—°ë½ì²˜
    st.markdown("---")
    st.subheader("ğŸ“ ì§€ì›")

    st.markdown("""
    ì¶”ê°€ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´:

    - ğŸ“§ ì´ë©”ì¼: support@example.com
    - ğŸ› ë²„ê·¸ ë¦¬í¬íŠ¸: GitHub Issues
    - ğŸ’¡ ê¸°ëŠ¥ ì œì•ˆ: GitHub Discussions
    - ğŸ“– ë¬¸ì„œ: ì˜¨ë¼ì¸ ë§¤ë‰´ì–¼
    """)

def main():
    """ë©”ì¸ í•¨ìˆ˜"""
    # ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
    page = create_sidebar()

    # í˜ì´ì§€ë³„ ë¼ìš°íŒ…
    if page == "ğŸ  í™ˆ":
        create_home_page()

    elif page == "âœï¸ ë¶„ì ê·¸ë¦¬ê¸°":
        st.title("âœï¸ ë¶„ì ê·¸ë¦¬ê¸°")
        st.markdown("---")

        drawer = MoleculeDrawer()
        drawer.create_drawing_interface()

    elif page == "ğŸ§¬ SMARTS ìƒì„±":
        st.title("ğŸ§¬ SMARTS ìƒì„±")
        st.markdown("---")

        # í˜„ì¬ ë¶„ì ë¡œë“œ
        drawer = MoleculeDrawer()
        drawer.initialize_session_state()
        molecule = drawer.get_molecule()

        if not molecule.atoms:
            st.warning("âš ï¸ ë¨¼ì € ë¶„ìë¥¼ ê·¸ë ¤ì£¼ì„¸ìš”!")
            st.info("ë¶„ì ê·¸ë¦¬ê¸° í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ë¶„ìë¥¼ ê·¸ë¦° í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.")
        else:
            generator = SmartsGenerator()
            smarts = generator.create_smarts_interface(molecule)

            # ìƒì„±ëœ SMARTSë¥¼ ì„¸ì…˜ì— ì €ì¥
            if smarts:
                st.session_state['selected_pattern'] = smarts

    elif page == "ğŸ” íŒ¨í„´ ë§¤ì¹­":
        st.title("ğŸ” íŒ¨í„´ ë§¤ì¹­")
        st.markdown("---")

        matcher = PatternMatcher()
        matcher.create_pattern_matching_interface()

    elif page == "ğŸ”„ ë°°ì¹˜ ë§¤ì¹­":
        st.title("ğŸ”„ ë°°ì¹˜ ë§¤ì¹­")
        st.markdown("---")

        matcher = PatternMatcher()
        matcher.create_batch_matching_interface()

    elif page == "ğŸ“š íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬":
        st.title("ğŸ“š íŒ¨í„´ ë¼ì´ë¸ŒëŸ¬ë¦¬")
        st.markdown("---")

        generator = SmartsGenerator()
        generator.create_pattern_library_interface()

    elif page == "â„¹ï¸ ë„ì›€ë§":
        create_help_page()

    # í‘¸í„°
    st.markdown("---")
    st.markdown(
        """
        <div style='text-align: center; color: gray; padding: 20px;'>
            ğŸ§ª SMARTS íŒ¨í„´ í¸ì§‘ê¸° v1.0.0 | 
            Made with â¤ï¸ using Streamlit & RDKit
        </div>
        """,
        unsafe_allow_html=True
    )

if __name__ == "__main__":
    main()